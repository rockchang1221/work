<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>夢想航班查詢系統</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <h1>🎫 夢想航班查詢系統</h1>

  <div class="search-box">
    <input type="text" id="studentId" placeholder="輸入學生編號">
    <button onclick="searchTicket()">查詢</button>
  </div>

  <div class="ticket" id="ticketCard">
    <div class="airline">✈️ OO補習班 | 夢航計畫專屬機票</div>
    <h2 id="ticketName">乘客：</h2>
    <div class="info"><span class="label">編號：</span><span id="ticketId"></span></div>
    <div class="info"><span class="label">出發日：</span><span id="ticketDate">2026/01/17</span></div>
    <div class="info"><span class="label">預計目的地：</span><span id="ticketSchool"></span>（<span id="ticketDept"></span>）</div>
    <div class="info"><span class="label">座位：</span><span id="ticketSeat"></span></div>
    <div class="info"><span class="label">成績目標：</span><span id="ticketScore"></span></div>
    <div class="quote" id="ticketQuote"></div>
  </div>

  <div class="not-found" id="notFound">❌ 查無此機票，請確認編號是否正確</div>

  <script>
    let students = [];

    fetch('./students.json')
      .then(res => res.json())
      .then(data => students = data)
      .catch(err => console.error('讀取資料錯誤', err));

    function searchTicket() {
      const idInput = document.getElementById('studentId').value.trim();
      const student = students.find(s => s.id === idInput);

      const card = document.getElementById('ticketCard');
      const notFound = document.getElementById('notFound');

      if (student) {
        document.getElementById('ticketName').textContent = `乘客：${student.name}`;
        document.getElementById('ticketId').textContent = student.id;
        document.getElementById('ticketSchool').textContent = student.school;
        document.getElementById('ticketDept').textContent = student.department;
        document.getElementById('ticketSeat').textContent = randomSeat();
        document.getElementById('ticketScore').textContent = student.score;
        document.getElementById('ticketQuote').textContent = `“${student.quote}”`;

        card.style.display = 'flex';
        notFound.style.display = 'none';
      } else {
        card.style.display = 'none';
        notFound.style.display = 'block';
      }
    }

    function randomSeat() {
      const row = Math.floor(Math.random() * 30) + 1;
      const col = ['A', 'B', 'C', 'D', 'E', 'F'][Math.floor(Math.random() * 6)];
      return `${row}${col}`;
    }
  </script>

</body>
</html>
